import{d as b,T as j,o as u,e as m,b as l,w as _,u as o,m as x,F as y,Z as U,a as e,g,h as T,p as w,v as $,f as q,s as F,c as I,i as N,n as R,t as r,j as S}from"./app-be585e11.js";import{_ as B}from"./AppLayout-c5d08940.js";import{_ as V}from"./PrimaryButton-14ec9cf1.js";import{_ as c}from"./InputLabel-bdd90b42.js";import{_ as f,a as n}from"./TextInput-149e0e80.js";import{P as z}from"./Plus-ca0288f5.js";import{_ as A}from"./Modal-184ea046.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Banner-ae30a9cc.js";const P={class:"px-10 mt-10"},L={class:"overflow-auto px-10"},E={class:"text-xs font-light table-auto"},Q=e("thead",{class:"border-b font-medium"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-4"},"Numéro"),e("th",{scope:"col",class:"px-6 py-4"},"Début"),e("th",{scope:"col",class:"px-6 py-4"},"Intitulé"),e("th",{scope:"col",class:"px-6 py-4"},"Details"),e("th",{scope:"col",class:"px-6 py-4"},"Montant cible"),e("th",{scope:"col",class:"px-6 py-4"},"Date de clôture"),e("th",{scope:"col",class:"px-6 py-4"},"Participants"),e("th",{scope:"col",class:"px-6 py-4"},"Minimum de participation"),e("th",{scope:"col",class:"px-6 py-4 capitalize"}," échéance "),e("th",{scope:"col",class:"px-6 py-4"},"Montant collécté"),e("th",{scope:"col",class:"px-6 py-4"}," Taux de réalisation "),e("th",{scope:"col",class:"px-6 py-4"},"Action")])],-1),Z={class:"px-6 py-4"},G={class:"px-6 py-4"},H={class:"px-6 py-4"},J={class:"px-6 py-4"},K={class:"px-6 py-4"},O={class:"px-6 py-4"},W={class:"px-6 py-4"},X={class:"px-6 py-4"},Y={class:"px-6 py-4"},ee={class:"px-6 py-4"},te={class:"px-6 py-4"},se={class:"px-6 py-4 text-white"},oe={key:1},le=e("td",{colspan:"12"},"Aucune collecte pour le moment",-1),ae=[le],re=["onSubmit"],ie=e("span",{class:"text-2xl font-medium"},"Créer une nouvelle collecte de fonds",-1),de={class:"mt-4"},ce={class:"mt-4"},ne={class:"mt-4"},ue={class:"mt-4"},me={class:"mt-4"},pe={class:"mt-4"},_e={class:"mt-4"},fe=e("div",{class:"mt-2"},[e("label",{class:"border font-medium text-sm flex items-center px-3 py-2.5 rounded-lg mt-0.5 shadow-lg",for:"editCove",role:"button"}," Choisir une image de couverture ")],-1),he={class:"flex items-center mt-2"},be=["src"],ge={class:"mt-4"},ve=e("option",{value:!0},"Tout le monde",-1),xe=e("option",{value:!1},"Mes paroissiens",-1),ye={class:"mt-4"},we={key:0,style:{"border-top-color":"transparent"},class:"ml-2 w-3 h-3 border-2 border-white border-solid rounded-full animate-spin"},Fe={__name:"CollectesView",props:{collectes:""},setup(v){b([]);let d=b(!1),h=b(!1);const a=j({titre:"",description:"",minimum:"0",date_debut:"",date_cloture:"",objectif:"",toutlemonde:"",couverture:""}),D=i=>{let s="";i.target?s=i.target.files[0]:s=i,console.log(s.name);const t=new FileReader;t.onload=p=>{a.couverture=t.result.split(",")[1],h.value=p.target.result},t.readAsDataURL(s)},k=()=>{a.post(route("collectes.store"),{onSuccess:()=>{a.reset(),h.value=!1,d.value=!1}})},C=(i,s)=>s*100/i,M=i=>{const s=new Date,p=new Date(i).getTime()-s.getTime();return Math.ceil(p/(1e3*3600*24))};return(i,s)=>(u(),m(y,null,[l(B,null,{default:_(()=>[l(o(U),{title:"Collecte de fonds"}),e("div",P,[l(V,{onClick:s[0]||(s[0]=t=>x(d)?d.value=!0:d=!0)},{default:_(()=>[g(" enregistrer une collecte ")]),_:1})]),e("div",L,[e("table",E,[Q,e("tbody",null,[v.collectes.length>0?(u(!0),m(y,{key:0},T(v.collectes,(t,p)=>(u(),m("tr",{class:R(["py-3 font-medium text-start hover:bg-[#b7b7b7]",p%2==0?"bg-white":"bg-[#cecece]"])},[e("td",Z,r(t.id),1),e("td",G,r(t.date_debut),1),e("td",H,r(t.titre),1),e("td",J,r(t.description),1),e("td",K,r(t.objectif)+" cfa",1),e("td",O,r(t.date_cloture),1),e("td",W,r(t.toutlemonde?"Tous le monde":"Mes paroissiens"),1),e("td",X,r(t.minimum)+" cfa",1),e("td",Y," -"+r(M(t.date_cloture))+" jours ",1),e("td",ee,r(t.reunis)+" cfa",1),e("td",te,r(C(t.objectif,t.reunis))+" % ",1),e("td",se,[l(o(S),{href:i.route("collectes.show",t.id),class:"bg-blue-700 py-2 px-4 self-start rounded-lg"},{default:_(()=>[g(" Détails ")]),_:2},1032,["href"])])],2))),256)):(u(),m("tr",oe,ae))])])])]),_:1}),l(A,{show:o(d),onClose:s[9]||(s[9]=t=>x(d)?d.value=!1:d=!1)},{default:_(()=>[e("form",{class:"p-10",onSubmit:N(k,["prevent"])},[ie,e("div",de,[l(c,{for:"titre",value:"Intitulé"}),l(f,{id:"titre",modelValue:o(a).titre,"onUpdate:modelValue":s[1]||(s[1]=t=>o(a).titre=t),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"titre"},null,8,["modelValue"]),l(n,{class:"mt-2",message:o(a).errors.titre},null,8,["message"])]),e("div",ce,[l(c,{for:"description",value:"Détails"}),w(e("textarea",{"onUpdate:modelValue":s[2]||(s[2]=t=>o(a).description=t),class:"border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-md shadow-sm w-full",rows:"3"},null,512),[[$,o(a).description]]),l(n,{class:"mt-2",message:o(a).errors.description},null,8,["message"])]),e("div",ne,[l(c,{for:"minimum",value:"Montant minimum de participation"}),l(f,{id:"minimum",modelValue:o(a).minimum,"onUpdate:modelValue":s[3]||(s[3]=t=>o(a).minimum=t),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"minimum"},null,8,["modelValue"]),l(n,{class:"mt-2",message:o(a).errors.minimum},null,8,["message"])]),e("div",ue,[l(c,{for:"objectif",value:"Montant visé"}),l(f,{id:"objectif",modelValue:o(a).objectif,"onUpdate:modelValue":s[4]||(s[4]=t=>o(a).objectif=t),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"objectif"},null,8,["modelValue"]),l(n,{class:"mt-2",message:o(a).errors.objectif},null,8,["message"])]),e("div",me,[l(c,{for:"date_debut",value:"Date de début de la collecte"}),l(f,{id:"date_debut",modelValue:o(a).date_debut,"onUpdate:modelValue":s[5]||(s[5]=t=>o(a).date_debut=t),type:"date",class:"mt-1 block w-full",required:"",autocomplete:"date_debut"},null,8,["modelValue"]),l(n,{class:"mt-2",message:o(a).errors.date_debut},null,8,["message"])]),e("div",pe,[l(c,{for:"date_cloture",value:"Date de clôture de la collecte"}),l(f,{id:"date_cloture",modelValue:o(a).date_cloture,"onUpdate:modelValue":s[6]||(s[6]=t=>o(a).date_cloture=t),type:"date",class:"mt-1 block w-full",required:"",autocomplete:"date_cloture"},null,8,["modelValue"]),l(n,{class:"mt-2",message:o(a).errors.date_cloture},null,8,["message"])]),e("div",_e,[l(c,{for:"couverture",value:"Image de couverture"}),fe,e("div",he,[e("input",{type:"file",id:"editCove",class:"hidden",onChange:s[7]||(s[7]=t=>D(t)),accept:"image/*",name:"couverture"},null,32),o(h)?(u(),m("img",{key:0,src:o(h),class:"rounded-md my-4",width:"200"},null,8,be)):q("",!0)]),l(n,{class:"mt-2",message:o(a).errors.couverture},null,8,["message"])]),e("div",ge,[l(c,{for:"toutlemonde",value:"Qui peut participer ?"}),w(e("select",{required:"",class:"border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-md shadow-sm","onUpdate:modelValue":s[8]||(s[8]=t=>o(a).toutlemonde=t)},[ve,xe,l(n,{class:"mt-2",message:o(a).errors.toutlemonde},null,8,["message"])],512),[[F,o(a).toutlemonde]])]),e("div",ye,[l(V,null,{default:_(()=>[g(" Valider "),o(a).processing?(u(),m("div",we)):(u(),I(z,{key:1,size:20}))]),_:1})])],40,re)]),_:1},8,["show"])],64))}};export{Fe as default};
