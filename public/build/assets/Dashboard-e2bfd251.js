import{d as x,T as j,q as D,o,e as i,b as _,w as b,u as s,m as p,F as g,Z as V,a as e,h as T,g as f,t as a,f as u,i as w,p as R,v as F,n as M,H as $}from"./app-dc519e83.js";import{_ as N}from"./AppLayout-1eab8f8c.js";import{_ as A}from"./InputLabel-8edae622.js";import{_ as z}from"./Modal-468b812b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Banner-d393d2e5.js";const B={class:"px-20 mt-10"},S=e("div",null,"Demandes d'adhésion",-1),I=["onClick"],L=e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1),O=[L],Z={key:0},q={class:"flex items-center gap-3 mt-2 whitespace-pre-wrap"},E={class:"text-xs font-light table-auto"},H={class:"border-b font-medium"},P=e("th",{scope:"col",class:"px-2 py-4 capitalize"}," Statut ",-1),U=e("th",{scope:"col",class:"px-2 py-4 capitalize"}," Dénomination ",-1),G={key:0,scope:"col",class:"px-2 py-4 capitalize"},J={key:1,scope:"col",class:"px-2 py-4 capitalize"},K=e("th",{scope:"col",class:"px-2 py-4 capitalize"}," Adresse ",-1),Q=e("th",{scope:"col",class:"px-2 py-4 capitalize"}," Téléphone Fixe ",-1),W=e("th",{scope:"col",class:"px-2 py-4 capitalize"}," Prénom et nom du responsable ",-1),X=e("th",{scope:"col",class:"px-2 py-4 capitalize"}," Titre du responsable ",-1),Y=e("th",{scope:"col",class:"px-2 py-4 capitalize"}," Demande faite le ",-1),ee=e("th",{scope:"col",class:"px-2 py-4 capitalize"}," Action ",-1),te={class:"py-3 font-medium text-start"},se={class:"px-2 py-4 capitalize text-center"},oe={class:"px-2 py-4 capitalize text-center"},ie={key:0,class:"px-2 py-4 capitalize"},ae={key:1,class:"px-2 py-4 capitalize"},ne={class:"px-2 py-4 capitalize text-center"},le={class:"px-2 py-4 capitalize text-center"},re={class:"px-2 py-4 capitalize text-center"},ce={class:"px-2 py-4 capitalize text-center"},de={class:"px-2 py-4 capitalize text-center"},pe={class:"px-2 py-4 capitalize text-center flex gap-2"},ue=["onClick"],_e=["onClick"],he={key:1,class:"p-5 text-slate-600 text-lg font-xl"},fe=e("span",{class:"text-2xl font-medium"},"Valider la demande d'adhésion",-1),me={class:"mt-4"},xe={class:"text-blue-500"},be={class:"mt-4"},ye={class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 focus:bg-blue-700 active:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition ease-in-out duration-150"},ve={key:0,style:{"border-top-color":"transparent"},class:"ml-2 w-3 h-3 border-2 border-white border-solid rounded-full animate-spin bg-blue-600"},ge=e("span",{class:"text-2xl font-medium"},"Rejeter la demande d'adhésion",-1),we={class:"mt-4"},ze={class:"text-red-500"},ke={key:0,class:"mt-4"},Ce={class:"mt-4"},je={class:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 focus:bg-red-700 active:bg-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150"},De={key:0,style:{"border-top-color":"transparent"},class:"ml-2 w-3 h-3 border-2 border-white border-solid rounded-full animate-spin bg-red-600"},Ae={__name:"Dashboard",props:{demandeurs:""},setup(y){const k=y;let h=x([]),l=x(!1),n=x(!1),r=x();const d=j({id:1,verified:0,statut:"",denomination:"",diocese:"",doyenne:"",adresse:"",telephonefixe:" ",telephonemobile:"",emailinstitution:"",emaildemandeur:"",slogan:"",nomresp:"",prenomresp:"",titreresp:"",emailresp:"",raison:""}),C={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"};return D(()=>{for(let v in k.demandeurs)h.value.push(!1)}),(v,c)=>(o(),i(g,null,[_(N,null,{default:b(()=>[_(s(V),{title:"Tableau de bord"}),e("div",B,[S,y.demandeurs.length>0?(o(!0),i(g,{key:0},T(y.demandeurs,(t,m)=>(o(),i("div",{key:t,class:"w-full overflow-auto"},[e("div",{role:"button",class:"flex items-center bg-gray-300 px-3 py-2 justify-between rounded-md mt-5",onClick:Ve=>s(h)[m]=!s(h)[m]},[f(a(t.denomination)+" ",1),(o(),i("svg",{class:M(["ml-2 -mr-0.5 h-4 w-4 transition-all",s(h)[m]?"rotate-180":""]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},O,2))],8,I),_($,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:b(()=>[s(h)[m]?(o(),i("div",Z,[e("div",q,[e("table",E,[e("thead",H,[e("tr",null,[P,U,t.diocese?(o(),i("th",G," Archidiocèse/Diocèse ")):u("",!0),t.doyenne?(o(),i("th",J," Doyenné ")):u("",!0),K,Q,W,X,Y,ee])]),e("tbody",null,[e("tr",te,[e("td",se,a(t.statut),1),e("td",oe,a(t.denomination),1),t.diocese?(o(),i("td",ie,a(t.diocese),1)):u("",!0),t.doyenne?(o(),i("td",ae,a(t.doyenne),1)):u("",!0),e("td",ne,a(t.adresse),1),e("td",le,a(t.telephonefixe??"-----"),1),e("td",re,a(t.prenomresp)+" "+a(t.nomresp),1),e("td",ce,a(t.titreresp),1),e("td",de,a(new Intl.DateTimeFormat("fr-FR",C).format(new Date(t.created_at))),1),e("td",pe,[e("button",{class:"bg-blue-700 py-2 px-4 self-start rounded-lg text-white flex-shrink-0",onClick:()=>(p(l)?l.value=!0:l=!0,p(r)?r.value=t:r=t)}," Valider ",8,ue),e("button",{class:"bg-red-700 py-2 px-4 self-start rounded-lg text-white flex-shrink-0",onClick:()=>(p(n)?n.value=!0:n=!0,p(r)?r.value=t:r=t)}," Rejeter ",8,_e)])])])])])])):u("",!0)]),_:2},1024)]))),128)):(o(),i("div",he," Aucune demande d'adhésion actuellement "))])]),_:1}),_(z,{show:s(l),onClose:c[1]||(c[1]=t=>p(l)?l.value=!1:l=!1)},{default:b(()=>[e("form",{class:"p-10",onSubmit:c[0]||(c[0]=w(()=>(Object.assign(s(d),s(r)),s(d).post(v.route("valider")),p(l)?l.value=!1:l=!1),["prevent"]))},[fe,e("div",me,[f(" Vous allez valider la demande d'adhésion de "),e("span",xe,a(s(r).denomination),1)]),e("div",be,[e("button",ye,[f(" Confirmer "),s(d).processing?(o(),i("div",ve)):u("",!0)])])],32)]),_:1},8,["show"]),_(z,{show:s(n),onClose:c[4]||(c[4]=t=>p(n)?n.value=!1:n=!1)},{default:b(()=>[e("form",{class:"p-10",onSubmit:c[3]||(c[3]=w(()=>(Object.assign(s(d),s(r)),s(d).post(v.route("rejeter")),p(n)?n.value=!1:n=!1),["prevent"]))},[ge,e("div",we,[f(" Vous allez rejeter la demande d'adhésion de "),e("span",ze,a(s(r).denomination),1)]),s(n)?(o(),i("div",ke,[_(A,{for:"raison",value:"Raison du rejet"}),R(e("textarea",{"onUpdate:modelValue":c[2]||(c[2]=t=>s(d).raison=t),class:"border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-md shadow-sm w-full",rows:"3"},null,512),[[F,s(d).raison]])])):u("",!0),e("div",Ce,[e("button",je,[f(" Rejeter "),s(d).processing?(o(),i("div",De)):u("",!0)])])],32)]),_:1},8,["show"])],64))}};export{Ae as default};
