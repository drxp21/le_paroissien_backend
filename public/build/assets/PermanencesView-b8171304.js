import{d as l,K as T,q as A,T as f,o as i,c as H,w as D,b as x,u as r,Z as L,a as e,g as V,e as a,f as F,h as c,F as p,i as P,O as U,m as B,B as b,p as m,v as _}from"./app-3f1d9cfa.js";import{_ as O}from"./AppLayout-b8bb014a.js";import{_ as q}from"./PrimaryButton-8c89f868.js";import{P as z}from"./Plus-c747313b.js";import{_ as E}from"./Modal-a98733ba.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Banner-cc45b51e.js";const I={class:"px-20 mt-10"},J={key:0,style:{"border-top-color":"transparent"},class:"w-4 h-4 border-2 border-white-400 border-solid rounded-full animate-spin"},K={class:"flex flex-col"},R={class:"overflow-x-auto sm:-mx-6 lg:-mx-8 px-20"},Z={class:"py-2 inline-block min-w-full"},G={class:"overflow-auto px-10"},Q={class:"min-w-full"},W=e("thead",{class:"bg-white border-b"},[e("tr",null,[e("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-1 py-4 text-left"}," # "),e("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-1 py-4 text-left"}," Lundi "),e("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-1 py-4 text-left"}," Mardi "),e("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-1 py-4 text-left"}," Mercredi "),e("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-1 py-4 text-left"}," Jeudi "),e("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-1 py-4 text-left"}," Vendredi "),e("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-1 py-4 text-left"}," Samedi "),e("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-1 py-4 text-left"}," Dimanche ")])],-1),X={class:"bg-gray-100 border-b"},Y=e("td",{class:"px-2 py-4 whitespace-nowrap text-sm font-medium text-gray-900"}," Heures de Messe(s) ",-1),ee={class:"text-sm text-gray-900 font-light px-1 py-4 whitespace-nowrap"},te={class:"flex"},se=["onContextmenu","onUpdate:modelValue"],oe=["onClick"],re={class:"bg-white border-b"},ne=e("td",{class:"px-2 py-4 whitespace-nowrap text-sm font-medium text-gray-900"}," Permanences Confession ",-1),ie={class:"text-sm text-gray-900 font-light px-1 py-4 whitespace-nowrap"},ae=["onUpdate:modelValue"],ue={class:"bg-gray-100 border-b"},le=e("td",{class:"px-2 py-4 whitespace-nowrap text-sm font-medium text-gray-900"}," Permanences Pretre ",-1),de={class:"text-sm text-gray-900 font-light px-1 py-4 whitespace-nowrap"},ce=["onUpdate:modelValue"],pe={class:"bg-white border-b"},me=e("td",{class:"px-2 py-4 whitespace-nowrap text-sm font-medium text-gray-900"}," Permanences Secretariat ",-1),_e={class:"text-sm text-gray-900 font-light px-1 py-4 whitespace-nowrap"},he={class:"flex flex-col"},fe=["onUpdate:modelValue"],xe=["onUpdate:modelValue"],be=e("span",{class:"text-2xl font-medium"},"Supprimer cette heure de messe pour ce jour ",-1),ye=e("div",{class:"mt-4"},[e("button",{class:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 focus:bg-red-700 active:bg-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Confirmer ")],-1),ge=[be,ye],Ce={__name:"PermanencesView",props:{permanences_messe:"",permanences_confession:"",permanences_pretre:"",permanences_secretariat:""},setup($){const h=$;let y=l(!1),j=T(),u=l(!1),d=l([]),g=l([]),w=l([]),M=l(""),v=l([]);const N=async()=>{y.value=!0;let t=[];for(let s of d.value)t.push(b.put(route("permanencesmesse.update",s),s));for(let s of g.value)t.push(b.put(route("permanencesconfession.update",s),s));for(let s of w.value)t.push(b.put(route("permanencespretres.update",s),s));for(let s of v.value)t.push(b.put(route("permanencessecretariat.update",s),s));Promise.all(t).then(()=>{window.location.reload()})},S=t=>{M.value=t,u.value=!0};return A(()=>{for(const[t,s]of h.permanences_messe.entries())d.value.push(f({id:(s==null?void 0:s.id)??t,jour_id:(s==null?void 0:s.jour_id)??t,heureDebut:(s==null?void 0:s.heureDebut)??0,institution_id:j.props.auth.user.institution.id}));for(let t of h.permanences_confession)g.value.push(f({id:t.id,jour_id:t.jour_id,heureDebut:t.heureDebut,institution_id:t.institution_id}));for(let t of h.permanences_pretre)w.value.push(f({id:t.id,jour_id:t.jour_id,heureDebut:t.heureDebut,institution_id:t.institution_id}));for(let t of h.permanences_secretariat)v.value.push(f({id:t.id,jour_id:t.jour_id,heureDebut:t.heureDebut,heureFin:t.heureFin,institution_id:t.institution_id}))}),(t,s)=>(i(),H(O,null,{default:D(()=>[x(r(L),{title:"Permanences"}),e("div",I,[x(q,{onClick:N,disabled:r(y)},{default:D(()=>[V(" Mettre à jour   "),r(y)?(i(),a("div",J)):F("",!0)]),_:1},8,["disabled"])]),e("div",K,[e("div",R,[e("div",Z,[e("div",G,[e("table",Q,[W,e("tbody",null,[e("tr",X,[Y,(i(),a(p,null,c(7,o=>e("td",ee,[e("div",te,[(i(!0),a(p,null,c(r(d),(n,k)=>(i(),a("div",null,[n.jour_id==o&&n.heureDebut!=0?m((i(),a("input",{key:0,type:"time",onContextmenu:P(C=>S(n.id),["prevent"]),class:"p-0 text-xs rounded-md","onUpdate:modelValue":C=>r(d)[k].heureDebut=C},null,40,se)),[[_,r(d)[k].heureDebut]]):F("",!0)]))),256)),e("button",{class:"bg-blue-500 text-white m-0.5 p-1 h-full rounded-md",title:"Ajouter une messe pour ce jour",onClick:n=>r(U).visit(t.route("permanenceMesseAdd"),{method:"post",data:{jour_id:o,institution_id:r(j).props.auth.user.institution.id}},{only:["permanences_messe"]})},[x(z,{size:12})],8,oe)])])),64))]),e("tr",re,[ne,(i(!0),a(p,null,c(r(g),o=>(i(),a("td",ie,[m(e("input",{type:"time",class:"p-0 text-xs rounded-md","onUpdate:modelValue":n=>o.heureDebut=n},null,8,ae),[[_,o.heureDebut]])]))),256))]),e("tr",ue,[le,(i(!0),a(p,null,c(r(w),o=>(i(),a("td",de,[m(e("input",{type:"time",class:"p-0 text-xs rounded-md","onUpdate:modelValue":n=>o.heureDebut=n},null,8,ce),[[_,o.heureDebut]])]))),256))]),e("tr",pe,[me,(i(!0),a(p,null,c(r(v),o=>(i(),a("td",_e,[e("div",he,[V(" De "),m(e("input",{type:"time",class:"p-0 text-xs rounded-md","onUpdate:modelValue":n=>o.heureDebut=n},null,8,fe),[[_,o.heureDebut]]),V(" à "),m(e("input",{type:"time",class:"p-0 text-xs rounded-md","onUpdate:modelValue":n=>o.heureFin=n},null,8,xe),[[_,o.heureFin]])])]))),256))])])])])])]),x(E,{show:r(u),onClose:s[1]||(s[1]=o=>B(u)?u.value=!1:u=!1)},{default:D(()=>[e("form",{class:"p-10",onSubmit:s[0]||(s[0]=P(()=>(r(U).visit(t.route("permanenceMesseDestroy"),{method:"delete",data:{id:r(M)}},{only:["permanences_messe"]}),B(u)?u.value=!1:u=!1),["prevent"]))},ge,32)]),_:1},8,["show"])])]),_:1}))}};export{Ce as default};
