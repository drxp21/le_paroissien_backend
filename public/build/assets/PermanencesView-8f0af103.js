import{d as l,K as T,q as A,T as x,o as i,c as H,w as V,b,u as o,Z as L,a as e,g as j,e as a,f as P,h as c,F as p,i as U,O as y,m as B,B as g,p as m,v as _}from"./app-dc519e83.js";import{_ as O}from"./AppLayout-1eab8f8c.js";import{_ as q}from"./PrimaryButton-feab8fd8.js";import{P as z}from"./Plus-0535cdbd.js";import{_ as E}from"./Modal-468b812b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Banner-d393d2e5.js";const I={class:"px-20 mt-10"},J={key:0,style:{"border-top-color":"transparent"},class:"w-4 h-4 border-2 border-white-400 border-solid rounded-full animate-spin"},K={class:"flex flex-col"},R={class:"overflow-x-auto sm:-mx-6 lg:-mx-8 px-20"},Z={class:"py-2 inline-block min-w-full"},G={class:"overflow-auto px-10"},Q={class:"min-w-full"},W=e("thead",{class:"bg-white border-b"},[e("tr",null,[e("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-1 py-4 text-left"}," # "),e("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-1 py-4 text-left"}," Lundi "),e("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-1 py-4 text-left"}," Mardi "),e("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-1 py-4 text-left"}," Mercredi "),e("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-1 py-4 text-left"}," Jeudi "),e("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-1 py-4 text-left"}," Vendredi "),e("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-1 py-4 text-left"}," Samedi "),e("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-1 py-4 text-left"}," Dimanche ")])],-1),X={class:"bg-gray-100 border-b"},Y=e("td",{class:"px-2 py-4 whitespace-nowrap text-sm font-medium text-gray-900"}," Heures de Messe(s) ",-1),ee={class:"text-sm text-gray-900 font-light px-1 py-4 whitespace-nowrap"},te={class:"flex"},se=["onContextmenu","onUpdate:modelValue"],oe=["onClick"],re={class:"bg-white border-b"},ne=e("td",{class:"px-2 py-4 whitespace-nowrap text-sm font-medium text-gray-900"}," Permanences Confession ",-1),ie={class:"text-sm text-gray-900 font-light px-1 py-4 whitespace-nowrap"},ae=["onUpdate:modelValue"],ue={class:"bg-gray-100 border-b"},le=e("td",{class:"px-2 py-4 whitespace-nowrap text-sm font-medium text-gray-900"}," Permanences Pretre ",-1),de={class:"text-sm text-gray-900 font-light px-1 py-4 whitespace-nowrap"},ce=["onUpdate:modelValue"],pe={class:"bg-white border-b"},me=e("td",{class:"px-2 py-4 whitespace-nowrap text-sm font-medium text-gray-900"}," Permanences Secretariat ",-1),_e={class:"text-sm text-gray-900 font-light px-1 py-4 whitespace-nowrap"},he={class:"flex flex-col"},fe=["onUpdate:modelValue"],xe=["onUpdate:modelValue"],be=e("span",{class:"text-2xl font-medium"},"Supprimer cette heure de messe pour ce jour ",-1),ye=e("div",{class:"mt-4"},[e("button",{class:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 focus:bg-red-700 active:bg-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Confirmer ")],-1),ge=[be,ye],Ce={__name:"PermanencesView",props:{permanences_messe:"",permanences_confession:"",permanences_pretre:"",permanences_secretariat:""},setup($){const h=$;let f=l(!1),k=T(),u=l(!1),d=l([]),v=l([]),w=l([]),M=l(""),D=l([]);const N=async()=>{f.value=!0;let t=[];for(let s of d.value)t.push(g.put(route("permanencesmesse.update",s),s));for(let s of v.value)t.push(g.put(route("permanencesconfession.update",s),s));for(let s of w.value)t.push(g.put(route("permanencespretres.update",s),s));for(let s of D.value)t.push(g.put(route("permanencessecretariat.update",s),s));Promise.all(t).then(()=>{y.visit(route("permanences")),y.visit(route("permanences-check"))})},S=t=>{M.value=t,u.value=!0};return A(()=>{for(const[t,s]of h.permanences_messe.entries())d.value.push(x({id:(s==null?void 0:s.id)??t,jour_id:(s==null?void 0:s.jour_id)??t,heureDebut:(s==null?void 0:s.heureDebut)??0,institution_id:k.props.auth.user.institution.id}));for(let t of h.permanences_confession)v.value.push(x({id:t.id,jour_id:t.jour_id,heureDebut:t.heureDebut,institution_id:t.institution_id}));for(let t of h.permanences_pretre)w.value.push(x({id:t.id,jour_id:t.jour_id,heureDebut:t.heureDebut,institution_id:t.institution_id}));for(let t of h.permanences_secretariat)D.value.push(x({id:t.id,jour_id:t.jour_id,heureDebut:t.heureDebut,heureFin:t.heureFin,institution_id:t.institution_id}))}),(t,s)=>(i(),H(O,null,{default:V(()=>[b(o(L),{title:"Permanences"}),e("div",I,[b(q,{onClick:N,disabled:o(f)},{default:V(()=>[j(" Mettre à jour   "),o(f)?(i(),a("div",J)):P("",!0)]),_:1},8,["disabled"])]),e("div",K,[e("div",R,[e("div",Z,[e("div",G,[e("table",Q,[W,e("tbody",null,[e("tr",X,[Y,(i(),a(p,null,c(7,r=>e("td",ee,[e("div",te,[(i(!0),a(p,null,c(o(d),(n,C)=>(i(),a("div",null,[n.jour_id==r&&n.heureDebut!=0?m((i(),a("input",{key:0,type:"time",onContextmenu:U(F=>S(n.id),["prevent"]),class:"p-0 text-xs rounded-md","onUpdate:modelValue":F=>o(d)[C].heureDebut=F},null,40,se)),[[_,o(d)[C].heureDebut]]):P("",!0)]))),256)),e("button",{class:"bg-blue-500 text-white m-0.5 p-1 h-full rounded-md",title:"Ajouter une messe pour ce jour",onClick:n=>o(y).visit(t.route("permanenceMesseAdd"),{method:"post",data:{jour_id:r,institution_id:o(k).props.auth.user.institution.id}},{only:["permanences_messe"]})},[b(z,{size:12,disabled:o(f)},null,8,["disabled"])],8,oe)])])),64))]),e("tr",re,[ne,(i(!0),a(p,null,c(o(v),r=>(i(),a("td",ie,[m(e("input",{type:"time",class:"p-0 text-xs rounded-md","onUpdate:modelValue":n=>r.heureDebut=n},null,8,ae),[[_,r.heureDebut]])]))),256))]),e("tr",ue,[le,(i(!0),a(p,null,c(o(w),r=>(i(),a("td",de,[m(e("input",{type:"time",class:"p-0 text-xs rounded-md","onUpdate:modelValue":n=>r.heureDebut=n},null,8,ce),[[_,r.heureDebut]])]))),256))]),e("tr",pe,[me,(i(!0),a(p,null,c(o(D),r=>(i(),a("td",_e,[e("div",he,[j(" De "),m(e("input",{type:"time",class:"p-0 text-xs rounded-md","onUpdate:modelValue":n=>r.heureDebut=n},null,8,fe),[[_,r.heureDebut]]),j(" à "),m(e("input",{type:"time",class:"p-0 text-xs rounded-md","onUpdate:modelValue":n=>r.heureFin=n},null,8,xe),[[_,r.heureFin]])])]))),256))])])])])])]),b(E,{show:o(u),onClose:s[1]||(s[1]=r=>B(u)?u.value=!1:u=!1)},{default:V(()=>[e("form",{class:"p-10",onSubmit:s[0]||(s[0]=U(()=>(o(y).visit(t.route("permanenceMesseDestroy"),{method:"delete",data:{id:o(M)}},{only:["permanences_messe"]}),B(u)?u.value=!1:u=!1),["prevent"]))},ge,32)]),_:1},8,["show"])])]),_:1}))}};export{Ce as default};
