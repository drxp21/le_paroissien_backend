import{d as w,T,q as z,o as d,e as r,b as o,w as b,u as t,m as v,F as j,Z as A,a as e,g as k,f as g,h as H,p as D,v as M,s as N,c as q,i as L,n as O,t as S}from"./app-73bfca16.js";import{_ as Z}from"./AppLayout-cf194d8a.js";import{_ as C}from"./PrimaryButton-05ccbf87.js";import{_ as y}from"./InputLabel-7a081759.js";import{_ as V,a as h}from"./TextInput-3d2538f1.js";import{P as G}from"./PencilOutline-8c968387.js";import{P as J}from"./Plus-1a767d9a.js";import{_ as $}from"./Modal-4c4a3b9a.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Banner-a5df8d72.js";const K=(x,U)=>{const u=[];x.forEach(f=>{const n=Object.values(f).join(",");u.push(n)});const _=u.join(`
`),c=new Blob([_],{type:"text/csv"}),m=URL.createObjectURL(c),p=document.createElement("a");p.href=m,p.download=U||"data.csv",p.style.display="none",document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(m)},Q={class:"px-20"},W={class:"mt-5 flex justify-center items-center gap-3"},X={class:"mt-10"},Y=e("li",{class:"bg-[#cecece] rounded-t-lg py-3 flex justify-evenly items-center text-sm font-medium text-start"},[e("span",{class:"flex-[3] pl-3"},"Auteur"),e("span",{class:"flex-[3] pl-3"}," Intention"),e("span",{class:"flex-[2] pl-3"}," Date"),e("span",{class:"flex-[2] pl-3"},"Heure "),e("span",{class:"flex-[2] pl-3"},"Type "),e("span",{class:"flex-[3] pl-3"},"Action")],-1),ee={class:"flex-[3] pl-3"},te={class:"flex-[3] pl-3"},se={class:"flex-[2] pl-3"},oe={class:"flex-[2] pl-3"},le={class:"flex-[2] pl-3"},ae={class:"flex-[3] flex gap-3 text-white justify-start"},ne=["disabled","onClick"],de={key:1,class:"bg-[#b7b7b7] rounded-b-lg py-3 flex justify-evenly items-center text-sm font-medium text-start"},re=["onSubmit"],ie=e("span",{class:"text-2xl font-medium"},"Renseigner une demande physique",-1),ue={class:"mt-4"},me={class:"mt-4"},ce={class:"mt-4"},pe={class:"mt-4"},fe=e("option",{value:"Simple"},"Simple",-1),_e=e("option",{value:"Neuvaine"},"Neuvaine",-1),ve=e("option",{value:"Trentaine"},"Trentaine",-1),ye=[fe,_e,ve],he=e("br",null,null,-1),be={key:0,class:"text-slate-400"},ge={key:1,class:"text-slate-400"},xe={key:2,class:"text-slate-400"},we={class:"mt-4"},ke={key:0,style:{"border-top-color":"transparent"},class:"ml-2 w-3 h-3 border-2 border-white border-solid rounded-full animate-spin"},Ve=["onSubmit"],Se=e("span",{class:"text-2xl font-medium"},"Renseigner une demande physique",-1),De={class:"mt-4"},Ce={class:"mt-4"},Ue={class:"mt-4"},Re={class:"mt-4"},Te=e("option",{value:"Simple"},"Simple",-1),je=e("option",{value:"Neuvaine"},"Neuvaine",-1),Me=e("option",{value:"Trentaine"},"Trentaine",-1),Ne=[Te,je,Me],qe=e("br",null,null,-1),Le={key:0,class:"text-slate-400"},$e={key:1,class:"text-slate-400"},Fe={key:2,class:"text-slate-400"},Be={class:"mt-4"},Ie={key:0,style:{"border-top-color":"transparent"},class:"ml-2 w-3 h-3 border-2 border-white border-solid rounded-full animate-spin"},We={__name:"DemandeMessesView",props:{demandemesses:""},setup(x){const U=x;let u=w(!1),_=w(!1),c=w("1970-01-01"),m=w("2070-01-01"),p=w([]),f=w([]),n=T({intention:"",date:"",heure:"",type:""}),a=T({id:"",intention:"",date:"",heure:"",type:""});T({id:""});const F=i=>{a.id=i.id,a.intention=i.intention,a.date=i.date,a.heure=i.heure,a.type=i.type,_.value=!0},B=()=>{n.post(route("demandemesses.store"),{onSuccess:()=>{n.reset(),u.value=!1}})},I=()=>{a.put(route("demandemesses.update",a),{onSuccess:()=>{a.reset(),_.value=!1}})},R=()=>{f.value=U.demandemesses.filter(i=>new Date(c.value)<=new Date(i.date)&&new Date(i.date)<=new Date(m.value))},E=()=>{for(let i of f.value)p.value.push({date:new Date(i.date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),intention:i.intention});K(p.value,"demandeMesses"+new Date().toLocaleDateString())};return z(()=>{R()}),(i,l)=>(d(),r(j,null,[o(Z,null,{default:b(()=>[o(t(A),{title:"Demandes de messe"}),e("div",Q,[o(C,{onClick:l[0]||(l[0]=s=>v(u)?u.value=!0:u=!0)},{default:b(()=>[k(" Renseigner une demande physique ")]),_:1}),x.demandemesses.length>0?(d(),r("button",{key:0,class:"inline-flex items-center px-4 py-2 bg-teal-800 border border-transparent rounded-md font-semibold text-xs text-white tracking-widest hover:bg-teal-700 focus:bg-teal-700 active:bg-teal-900 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition ease-in-out duration-150",onClick:E}," Télécharger en csv ")):g("",!0),e("div",W,[k(" Filtrer de "),o(V,{id:"date",modelValue:t(c),"onUpdate:modelValue":l[1]||(l[1]=s=>v(c)?c.value=s:c=s),type:"date",onChange:R},null,8,["modelValue"]),k(" à "),o(V,{id:"date",modelValue:t(m),"onUpdate:modelValue":l[2]||(l[2]=s=>v(m)?m.value=s:m=s),type:"date",onChange:R},null,8,["modelValue"]),o(C,{onClick:l[3]||(l[3]=()=>{v(f)?f.value=x.demandemesses:f=x.demandemesses,v(c)?c.value="1970-01-01":c="1970-01-01",v(m)?m.value="2070-01-01":m="2070-01-01"})},{default:b(()=>[k(" Supprimer le filtre ")]),_:1})]),e("ul",X,[Y,t(f).length>0?(d(!0),r(j,{key:0},H(t(f),(s,P)=>(d(),r("li",{class:O(["py-2.5 flex justify- items-center text-sm font-medium hover:bg-[#b7b7b7] text-start",P%2==0?"bg-white":"bg-[#cecece]"])},[e("span",ee,S(s.auteur),1),e("span",te,S(s.intention),1),e("span",se,S(new Date(s.date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})),1),e("span",oe,S(s.heure),1),e("span",le,S(s.type),1),e("div",ae,[e("button",{disabled:s.paroissien_id,class:"bg-blue-700 py-2 px-4 self-start rounded-lg disabled:bg-gray-500 disabled:cursor-not-allowed",onClick:Ee=>F(s)}," Modifier ",8,ne)])],2))),256)):(d(),r("li",de," Aucune demande de messe "))])])]),_:1}),o($,{show:t(u),onClose:l[8]||(l[8]=s=>v(u)?u.value=!1:u=!1)},{default:b(()=>[e("form",{class:"p-10",onSubmit:L(B,["prevent"])},[ie,e("div",ue,[o(y,{for:"intention",value:"Intention de messe"}),D(e("textarea",{"onUpdate:modelValue":l[4]||(l[4]=s=>t(n).intention=s),class:"border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-md shadow-sm w-full",rows:"3"},null,512),[[M,t(n).intention]]),o(h,{class:"mt-2",message:t(n).errors.intention},null,8,["message"])]),e("div",me,[o(y,{for:"date",value:"Date de la messe"}),o(V,{id:"date",modelValue:t(n).date,"onUpdate:modelValue":l[5]||(l[5]=s=>t(n).date=s),type:"date",class:"mt-1 block w-full",required:"",autocomplete:"date"},null,8,["modelValue"]),o(h,{class:"mt-2",message:t(n).errors.date},null,8,["message"])]),e("div",ce,[o(y,{for:"heure",value:"Heure de la messe"}),o(V,{id:"heure",modelValue:t(n).heure,"onUpdate:modelValue":l[6]||(l[6]=s=>t(n).heure=s),type:"time",class:"mt-1 block w-full",required:"",autocomplete:"heure"},null,8,["modelValue"]),o(h,{class:"mt-2",message:t(n).errors.heure},null,8,["message"])]),e("div",pe,[o(y,{for:"type",value:"Type de demande de messe"}),D(e("select",{class:"border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-md shadow-sm","onUpdate:modelValue":l[7]||(l[7]=s=>t(n).type=s)},ye,512),[[N,t(n).type]]),o(h,{class:"mt-2",message:t(n).errors.type},null,8,["message"]),he,t(n).type=="Simple"?(d(),r("span",be," 4 000 cfa")):g("",!0),t(n).type=="Neuvaine"?(d(),r("span",ge," 40 000 cfa")):g("",!0),t(n).type=="Trentaine"?(d(),r("span",xe," 150 000 cfa")):g("",!0)]),e("div",we,[o(C,null,{default:b(()=>[k(" Renseigner "),t(n).processing?(d(),r("div",ke)):(d(),q(J,{key:1,size:20}))]),_:1})])],40,re)]),_:1},8,["show"]),o($,{show:t(_),onClose:l[13]||(l[13]=s=>v(_)?_.value=!1:_=!1)},{default:b(()=>[e("form",{class:"p-10",onSubmit:L(I,["prevent"])},[Se,e("div",De,[o(y,{for:"intention",value:"Intention de messe"}),D(e("textarea",{"onUpdate:modelValue":l[9]||(l[9]=s=>t(a).intention=s),class:"border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-md shadow-sm w-full",rows:"3"},null,512),[[M,t(a).intention]]),o(h,{class:"mt-2",message:t(a).errors.intention},null,8,["message"])]),e("div",Ce,[o(y,{for:"date",value:"Date de la messe"}),o(V,{id:"date",modelValue:t(a).date,"onUpdate:modelValue":l[10]||(l[10]=s=>t(a).date=s),type:"date",class:"mt-1 block w-full",required:"",autocomplete:"date"},null,8,["modelValue"]),o(h,{class:"mt-2",message:t(a).errors.date},null,8,["message"])]),e("div",Ue,[o(y,{for:"heure",value:"Heure de la messe"}),o(V,{id:"heure",modelValue:t(a).heure,"onUpdate:modelValue":l[11]||(l[11]=s=>t(a).heure=s),type:"time",class:"mt-1 block w-full",required:"",autocomplete:"heure"},null,8,["modelValue"]),o(h,{class:"mt-2",message:t(a).errors.heure},null,8,["message"])]),e("div",Re,[o(y,{for:"type",value:"Type de demande de messe"}),D(e("select",{class:"border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-md shadow-sm","onUpdate:modelValue":l[12]||(l[12]=s=>t(a).type=s)},Ne,512),[[N,t(a).type]]),o(h,{class:"mt-2",message:t(a).errors.type},null,8,["message"]),qe,t(a).type=="Simple"?(d(),r("span",Le," 4000 cfa")):g("",!0),t(a).type=="Neuvaine"?(d(),r("span",$e," 40000 cfa")):g("",!0),t(a).type=="Trentaine"?(d(),r("span",Fe," 150000 cfa")):g("",!0)]),e("div",Be,[o(C,null,{default:b(()=>[k(" Modifier "),t(a).processing?(d(),r("div",Ie)):(d(),q(G,{key:1,size:20}))]),_:1})])],40,Ve)]),_:1},8,["show"])],64))}};export{We as default};
