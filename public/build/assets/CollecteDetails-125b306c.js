import{T as M,d as y,q as L,o as c,c as F,w as b,b as a,u as l,Z as P,a as e,t as u,e as g,f as j,g as v,m as C,h as E,F as Q,i as D,p as I,v as O,s as Z,n as G}from"./app-73bfca16.js";import{_ as H}from"./AppLayout-cf194d8a.js";import{_ as U}from"./PrimaryButton-05ccbf87.js";import{P as J}from"./PencilOutline-8c968387.js";import{_ as $}from"./Modal-4c4a3b9a.js";import{_ as d}from"./InputLabel-7a081759.js";import{_ as x,a as r}from"./TextInput-3d2538f1.js";import{C as A,r as K}from"./chart-c2ba7900.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Banner-a5df8d72.js";const W={class:"px-20 py-10"},X={class:"flex justify-between gap-10 mt-10"},Y={class:"flex flex-col gap-3 float-right"},ee={class:"text-xl font-semibold"},te=e("span",{class:"mt-1 text-lg"},"Déscription: ",-1),se={class:"flex"},le=["src"],oe={class:"grid grid-cols-2 mt-10"},ae={key:0,id:"collecteChart",class:"col-span-1"},ne={class:"text-end flex flex-col gap-3 col-span-1"},ie={class:"text-lg font-semibold"},de={class:"text-lg font-semibold"},re={class:"w-full"},ce={class:"mt-10"},ue={class:"text-lg font-semibold mb-4 flex justify-between"},me=e("li",{class:"bg-[#cecece] rounded-t-lg py-3 flex justify-evenly items-center text-sm font-medium text-start"},[e("span",{class:"flex-[1.2] pl-3"}," Auteur "),e("span",{class:"flex-[1.2] pl-3"}," Montant "),e("span",{class:"flex-[1.2] pl-3"}," Intention "),e("span",{class:"flex-[1.2] pl-3"}," Donné le: ")],-1),fe={class:"flex-[1.2] pl-3"},pe={class:"flex-[1.2] pl-3 text-green-700"},_e={class:"flex-[1.2] pl-3"},be={class:"flex-[1.2] pl-3"},ge={key:1,class:"bg-[#b7b7b7] rounded-b-lg py-3 flex justify-evenly items-center text-sm font-medium text-start"},ve=e("span",{class:"text-2xl font-medium"},"Supprimer la collecte ",-1),xe=e("div",{class:"mt-4"}," Vous allez supprimer la collecte et toutes les données qui y sont liées ! ",-1),he={class:"mt-4"},we={class:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 focus:bg-red-700 active:bg-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150"},ye={key:0,style:{"border-top-color":"transparent"},class:"ml-2 w-3 h-3 border-2 border-white border-solid rounded-full animate-spin bg-red-600"},Ce=["onSubmit"],Ve=e("span",{class:"text-2xl font-medium"},"Renseigner un don physique",-1),ke={class:"mt-4"},Me={class:"mt-4"},je=["onSubmit"],De=e("span",{class:"text-2xl font-medium"},"Modifier la collecte de fonds",-1),Ue={class:"mt-4"},$e={class:"mt-4"},qe={class:"mt-4"},Se={class:"mt-4"},Re={class:"mt-4"},Fe={class:"mt-4"},Ie={class:"mt-4"},Ae=e("div",{class:"mt-2"},[e("label",{class:"border font-medium text-sm flex items-center px-3 py-2.5 rounded-lg mt-0.5 shadow-lg",for:"editCove",role:"button"}," Changer l'image de couverture ")],-1),Te={class:"flex items-center mt-2"},ze=["src"],Be={class:"mt-4"},Ne=e("option",{value:!0},"Tout le monde",-1),Le=e("option",{value:!1},"Mes paroissiens",-1),Pe={class:"mt-4"},Ee={key:0,style:{"border-top-color":"transparent"},class:"ml-2 w-3 h-3 border-2 border-white border-solid rounded-full animate-spin"},et={__name:"CollecteDetails",props:{collecte:""},setup(i){var S;const n=i,o=M({id:"",titre:"",description:"",minimum:"0",date_debut:"",date_cloture:"",objectif:"",toutlemonde:"",couverture:""}),p=M({montant:"",auteur:"",collecte_id:n.collecte.id});y([]);let V=y(!1),m=y(!1),h=y(!1),_=y(!1);const k=f=>{f+="";let t=f.split("."),s=t[0],w=t.length>1?"."+t[1]:"";for(var R=/(\d+)(\d{3})/;R.test(s);)s=s.replace(R,"$1.$2");return s+w},q=M({id:(S=n.collecte)==null?void 0:S.id}),T=f=>{let t="";f.target?t=f.target.files[0]:t=f;const s=new FileReader;s.onload=w=>{o.couverture=s.result.split(",")[1],V.value=w.target.result},s.readAsDataURL(t)},z=()=>{o.id=n.collecte.id,o.titre=n.collecte.titre,o.minimum=n.collecte.minimum,o.description=n.collecte.description,o.date_debut=n.collecte.date_debut,o.date_cloture=n.collecte.date_cloture,o.objectif=n.collecte.objectif,o.toutlemonde=n.collecte.toutlemonde!=0,o.couverture=null,h.value=!0},B=()=>{o.put(route("collectes.update",o),{onSuccess:()=>{o.reset(),V.value=!1,h.value=!1}})},N=()=>{p.post(route("collectePhysique"),{onSuccess:()=>{m.value=!1}})};return L(()=>{A.register(...K),n.collecte&&new A("collecteChart",{type:"doughnut",data:{labels:["Collectés","Restant"],datasets:[{data:[n.collecte.reunis,n.collecte.objectif-n.collecte.reunis],backgroundColor:["#507db8","#CCCCCC"]}]},options:{plugins:{title:{position:"bottom",display:!0,text:"Evolution des fonds collectés",color:"#507db8",font:{size:18,weight:"bold"},padding:{top:10}}},rotation:-90,circumference:180,animation:{duration:1500,animateScale:!0,easing:"easeInOutQuint"},responsive:!0,maintainAspectRatio:!1}})}),(f,t)=>(c(),F(H,null,{default:b(()=>[a(l(P),{title:"Collecte de fonds"}),e("div",W,[e("div",X,[e("div",Y,[e("span",ee,u(i.collecte.titre)+" "+u(i.collecte.edition),1),te,e("p",null,u(i.collecte.description),1)]),e("div",se,[e("div",{class:"m-4 flex flex-col gap-4 self-end"},[e("button",{class:"px-3 py-2 bg-teal-700 text-white rounded-md shadow-sm text-sm self-end",onClick:z}," Modifier les informations ")]),e("img",{class:"w-44 rounded-xl shadow-lg",src:i.collecte.couverture_path},null,8,le)])]),e("div",oe,[i.collecte.participations.length>0?(c(),g("canvas",ae)):j("",!0),e("div",ne,[e("span",null,[v("Montant récolté : "),e("span",ie,u(k(i.collecte.reunis))+" cfa",1)]),e("span",null,[v("Montant restant : "),e("span",de,u(k(i.collecte.objectif))+" cfa",1)])])]),e("div",re,[e("ul",ce,[e("div",ue,[v(" Dons enregistrés "),a(U,{onClick:t[0]||(t[0]=s=>C(m)?m.value=!0:m=!0)},{default:b(()=>[v(" Renseigner un don physique ")]),_:1})]),me,i.collecte.participations.length>0?(c(!0),g(Q,{key:0},E(i.collecte.participations,(s,w)=>(c(),g("li",{class:G(["py-2.5 flex justify- items-center text-sm font-medium hover:bg-[#b7b7b7]",w%2==0?"bg-white":"bg-[#cecece]"])},[e("span",fe,u(s.auteur),1),e("span",pe,u(k(s.montant))+" cfa ",1),e("span",_e,u(s.intention??"----"),1),e("span",be,u(s.created_at.split("T")[0]),1)],2))),256)):(c(),g("li",ge," Aucune participation pour le moment "))])])]),a($,{show:l(_),onClose:t[2]||(t[2]=s=>C(_)?_.value=!1:_=!1)},{default:b(()=>[e("form",{class:"p-10",onSubmit:t[1]||(t[1]=D(()=>(l(q).delete(f.route("collectes.destroy",i.collecte.id)),C(_)?_.value=!1:_=!1),["prevent"]))},[ve,xe,e("div",he,[e("button",we,[v(" Confirmer "),l(q).processing?(c(),g("div",ye)):j("",!0)])])],32)]),_:1},8,["show"]),a($,{show:l(m),onClose:t[5]||(t[5]=s=>C(m)?m.value=!1:m=!1)},{default:b(()=>[e("form",{class:"p-10",onSubmit:D(N,["prevent"])},[Ve,e("div",ke,[a(d,{for:"auteur",value:"Auteur (Laisser vide pour un don anonyme )"}),a(x,{id:"auteur",modelValue:l(p).auteur,"onUpdate:modelValue":t[3]||(t[3]=s=>l(p).auteur=s),type:"text",class:"mt-1 block w-full",autocomplete:"auteur"},null,8,["modelValue"]),a(r,{class:"mt-2",message:l(p).errors.auteur},null,8,["message"])]),e("div",Me,[a(d,{for:"montant",value:"Montant"}),a(x,{id:"montant",modelValue:l(p).montant,"onUpdate:modelValue":t[4]||(t[4]=s=>l(p).montant=s),type:"text",class:"mt-1 block w-full",autocomplete:"montant"},null,8,["modelValue"]),a(r,{class:"mt-2",message:l(p).errors.montant},null,8,["message"])]),a(U,{class:"mt-4"},{default:b(()=>[v("Renseigner")]),_:1})],40,Ce)]),_:1},8,["show"]),a($,{show:l(h),onClose:t[14]||(t[14]=s=>C(h)?h.value=!1:h=!1)},{default:b(()=>[e("form",{class:"p-10",onSubmit:D(B,["prevent"])},[De,e("div",Ue,[a(d,{for:"titre",value:"Intitulé"}),a(x,{id:"titre",modelValue:l(o).titre,"onUpdate:modelValue":t[6]||(t[6]=s=>l(o).titre=s),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"titre"},null,8,["modelValue"]),a(r,{class:"mt-2",message:l(o).errors.titre},null,8,["message"])]),e("div",$e,[a(d,{for:"description",value:"Détails"}),I(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>l(o).description=s),class:"border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-md shadow-sm w-full",rows:"3"},null,512),[[O,l(o).description]]),a(r,{class:"mt-2",message:l(o).errors.description},null,8,["message"])]),e("div",qe,[a(d,{for:"minimum",value:"Montant minimum de participation"}),a(x,{id:"minimum",modelValue:l(o).minimum,"onUpdate:modelValue":t[8]||(t[8]=s=>l(o).minimum=s),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"minimum"},null,8,["modelValue"]),a(r,{class:"mt-2",message:l(o).errors.minimum},null,8,["message"])]),e("div",Se,[a(d,{for:"objectif",value:"Montant visé"}),a(x,{id:"objectif",modelValue:l(o).objectif,"onUpdate:modelValue":t[9]||(t[9]=s=>l(o).objectif=s),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"objectif"},null,8,["modelValue"]),a(r,{class:"mt-2",message:l(o).errors.objectif},null,8,["message"])]),e("div",Re,[a(d,{for:"date_debut",value:"Date de début de la collecte"}),a(x,{id:"date_debut",modelValue:l(o).date_debut,"onUpdate:modelValue":t[10]||(t[10]=s=>l(o).date_debut=s),type:"date",class:"mt-1 block w-full",required:"",autocomplete:"date_debut"},null,8,["modelValue"]),a(r,{class:"mt-2",message:l(o).errors.date_debut},null,8,["message"])]),e("div",Fe,[a(d,{for:"date_cloture",value:"Date de clôture de la collecte"}),a(x,{id:"date_cloture",modelValue:l(o).date_cloture,"onUpdate:modelValue":t[11]||(t[11]=s=>l(o).date_cloture=s),type:"date",class:"mt-1 block w-full",required:"",autocomplete:"date_cloture"},null,8,["modelValue"]),a(r,{class:"mt-2",message:l(o).errors.date_cloture},null,8,["message"])]),e("div",Ie,[a(d,{for:"couverture",value:"Image de couverture"}),Ae,e("div",Te,[e("input",{type:"file",id:"editCove",class:"hidden",onChange:t[12]||(t[12]=s=>T(s)),accept:"image/*",name:"couverture"},null,32),l(V)?(c(),g("img",{key:0,src:l(V),class:"rounded-md my-4",width:"200"},null,8,ze)):j("",!0)]),a(r,{class:"mt-2",message:l(o).errors.couverture},null,8,["message"])]),e("div",Be,[a(d,{for:"toutlemonde",value:"Qui peut participer ?"}),I(e("select",{required:"",class:"border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-md shadow-sm","onUpdate:modelValue":t[13]||(t[13]=s=>l(o).toutlemonde=s)},[Ne,Le,a(r,{class:"mt-2",message:l(o).errors.toutlemonde},null,8,["message"])],512),[[Z,l(o).toutlemonde]])]),e("div",Pe,[a(U,null,{default:b(()=>[v(" Modifier "),l(o).processing?(c(),g("div",Ee)):(c(),F(J,{key:1,size:20}))]),_:1})])],40,je)]),_:1},8,["show"])]),_:1}))}};export{et as default};
